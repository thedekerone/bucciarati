{"ast":null,"code":"function ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return typeof key === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (typeof input !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (typeof res !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\n// lib/withApollo.js\nimport withApollo from 'next-with-apollo';\n// import ApolloClient, { InMemoryCache } from 'apollo-boost';\nimport ApolloClient from 'apollo-client';\nimport { InMemoryCache } from 'apollo-cache-inmemory';\nimport { createHttpLink } from 'apollo-link-http';\nimport { setContext } from 'apollo-link-context';\n// // https://chupetinps.herokuapp.com\n\nconst link = createHttpLink({\n  uri: 'https://bucciarati-data.herokuapp.com',\n  useGETForQueries: true\n});\nconst authLink = setContext((_, {\n  headers\n}) => {\n  // get the authentication token from local storage if it exists\n  const user = localStorage.usuario;\n  const pass = localStorage.password;\n  // return the headers to the context so httpLink can read them\n  return {\n    headers: _objectSpread(_objectSpread({}, headers), {}, {\n      usuario: user ? user : null,\n      password: pass ? pass : null\n    })\n  };\n});\nexport default withApollo(({\n  ctx,\n  headers,\n  initialState\n}) => new ApolloClient({\n  link: authLink.concat(link),\n  cache: new InMemoryCache().restore(initialState || {})\n}), {\n  getDataFromTree: 'never'\n});","map":{"version":3,"names":["withApollo","ApolloClient","InMemoryCache","createHttpLink","setContext","link","uri","useGETForQueries","authLink","_","headers","user","localStorage","usuario","pass","password","_objectSpread","ctx","initialState","concat","cache","restore","getDataFromTree"],"sources":["/home/dekker/Documents/projects/github/bucciarati/lib/withApollo.js"],"sourcesContent":["// lib/withApollo.js\nimport withApollo from 'next-with-apollo'\n// import ApolloClient, { InMemoryCache } from 'apollo-boost';\nimport ApolloClient from 'apollo-client'\nimport { InMemoryCache } from 'apollo-cache-inmemory'\nimport { createHttpLink } from 'apollo-link-http'\nimport { setContext } from 'apollo-link-context'\n// // https://chupetinps.herokuapp.com\n\nconst link = createHttpLink({\n  uri: 'https://bucciarati-data.herokuapp.com',\n  useGETForQueries: true\n})\nconst authLink = setContext((_, { headers }) => {\n  // get the authentication token from local storage if it exists\n  const user = localStorage.usuario\n  const pass = localStorage.password\n  // return the headers to the context so httpLink can read them\n  return {\n    headers: {\n      ...headers,\n      usuario: user ? user : null,\n      password: pass ? pass : null\n    }\n  }\n})\nexport default withApollo(\n  ({ ctx, headers, initialState }) =>\n    new ApolloClient({\n      link: authLink.concat(link),\n\n      cache: new InMemoryCache().restore(initialState || {})\n    }),\n  {\n    getDataFromTree: 'never'\n  }\n)\n"],"mappings":";;;;;AAAA;AACA,OAAOA,UAAU,MAAM,kBAAkB;AACzC;AACA,OAAOC,YAAY,MAAM,eAAe;AACxC,SAASC,aAAa,QAAQ,uBAAuB;AACrD,SAASC,cAAc,QAAQ,kBAAkB;AACjD,SAASC,UAAU,QAAQ,qBAAqB;AAChD;;AAEA,MAAMC,IAAI,GAAGF,cAAc,CAAC;EAC1BG,GAAG,EAAE,uCAAuC;EAC5CC,gBAAgB,EAAE;AACpB,CAAC,CAAC;AACF,MAAMC,QAAQ,GAAGJ,UAAU,CAAC,CAACK,CAAC,EAAE;EAAEC;AAAQ,CAAC,KAAK;EAC9C;EACA,MAAMC,IAAI,GAAGC,YAAY,CAACC,OAAO;EACjC,MAAMC,IAAI,GAAGF,YAAY,CAACG,QAAQ;EAClC;EACA,OAAO;IACLL,OAAO,EAAAM,aAAA,CAAAA,aAAA,KACFN,OAAO;MACVG,OAAO,EAAEF,IAAI,GAAGA,IAAI,GAAG,IAAI;MAC3BI,QAAQ,EAAED,IAAI,GAAGA,IAAI,GAAG;IAAI;EAEhC,CAAC;AACH,CAAC,CAAC;AACF,eAAed,UAAU,CACvB,CAAC;EAAEiB,GAAG;EAAEP,OAAO;EAAEQ;AAAa,CAAC,KAC7B,IAAIjB,YAAY,CAAC;EACfI,IAAI,EAAEG,QAAQ,CAACW,MAAM,CAACd,IAAI,CAAC;EAE3Be,KAAK,EAAE,IAAIlB,aAAa,CAAC,CAAC,CAACmB,OAAO,CAACH,YAAY,IAAI,CAAC,CAAC;AACvD,CAAC,CAAC,EACJ;EACEI,eAAe,EAAE;AACnB,CACF,CAAC"},"metadata":{},"sourceType":"module"}