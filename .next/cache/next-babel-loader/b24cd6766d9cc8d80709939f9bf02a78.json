{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _taggedTemplateLiteral from \"@babel/runtime-corejs2/helpers/esm/taggedTemplateLiteral\";\nimport _JSXStyle from \"styled-jsx/style\";\nvar __jsx = React.createElement;\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n\\t{\\n\\t\\tgetUsers {\\n\\t\\t\\t_id\\n\\t\\t\\tusername\\n\\t\\t\\tpassword\\n\\t\\t}\\n\\t}\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport React, { useState } from 'react';\nimport { Query, graphql } from 'react-apollo';\nimport { Router } from '../../routes';\nimport gql from 'graphql-tag';\nvar GET_USER = gql(_templateObject());\nvar message = 'wrong username or password';\n\nvar LoginPortal = function LoginPortal(_ref) {\n  var show = _ref.show,\n      client = _ref.client,\n      setShow = _ref.setShow;\n\n  var _useState = useState(0),\n      count = _useState[0],\n      setCount = _useState[1];\n\n  var username, password;\n\n  var handleLogin =\n  /*#__PURE__*/\n  function () {\n    var _ref2 = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee() {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              localStorage.setItem('usuario', username.value.toLowerCase());\n              localStorage.setItem('password', password.value);\n              _context.next = 4;\n              return client.resetStore();\n\n            case 4:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function handleLogin() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var handleSubmit =\n  /*#__PURE__*/\n  function () {\n    var _ref3 = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee2(e) {\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              e.preventDefault();\n              _context2.next = 3;\n              return handleLogin();\n\n            case 3:\n              _context2.next = 5;\n              return client.query({\n                query: GET_USER\n              }).then(function (result) {\n                if (result.data.getUsers) {\n                  setShow(false);\n                  setCount(0);\n                } else {\n                  setCount(3);\n                }\n\n                return 'console.log(result);';\n              });\n\n            case 5:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function handleSubmit(_x) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  return __jsx(\"div\", {\n    className: _JSXStyle.dynamic([[\"581568485\", [count < 1 ? 'none' : 'inline', show ? 'block' : 'none']]])\n  }, __jsx(\"div\", {\n    className: _JSXStyle.dynamic([[\"581568485\", [count < 1 ? 'none' : 'inline', show ? 'block' : 'none']]]) + \" \" + 'portal'\n  }, __jsx(\"div\", {\n    className: _JSXStyle.dynamic([[\"581568485\", [count < 1 ? 'none' : 'inline', show ? 'block' : 'none']]]) + \" \" + 'login-container'\n  }, __jsx(\"div\", {\n    onClick: function onClick() {\n      setShow(false);\n    },\n    className: _JSXStyle.dynamic([[\"581568485\", [count < 1 ? 'none' : 'inline', show ? 'block' : 'none']]]) + \" \" + 'exit'\n  }, \"X\"), __jsx(\"h1\", {\n    className: _JSXStyle.dynamic([[\"581568485\", [count < 1 ? 'none' : 'inline', show ? 'block' : 'none']]])\n  }, \"Login\"), __jsx(\"form\", {\n    onSubmit: function onSubmit(e) {\n      handleSubmit(e);\n    },\n    className: _JSXStyle.dynamic([[\"581568485\", [count < 1 ? 'none' : 'inline', show ? 'block' : 'none']]])\n  }, __jsx(\"label\", {\n    htmlFor: \"username\",\n    className: _JSXStyle.dynamic([[\"581568485\", [count < 1 ? 'none' : 'inline', show ? 'block' : 'none']]])\n  }, \"username:\"), __jsx(\"input\", {\n    type: \"text\",\n    ref: function ref(input) {\n      username = input;\n    },\n    placeholder: \"username\",\n    className: _JSXStyle.dynamic([[\"581568485\", [count < 1 ? 'none' : 'inline', show ? 'block' : 'none']]])\n  }), __jsx(\"label\", {\n    htmlFor: \"password\",\n    className: _JSXStyle.dynamic([[\"581568485\", [count < 1 ? 'none' : 'inline', show ? 'block' : 'none']]])\n  }, \"password:\"), __jsx(\"input\", {\n    type: \"password\",\n    ref: function ref(input) {\n      password = input;\n    },\n    placeholder: \"password\",\n    className: _JSXStyle.dynamic([[\"581568485\", [count < 1 ? 'none' : 'inline', show ? 'block' : 'none']]])\n  }), __jsx(\"input\", {\n    type: \"submit\",\n    className: _JSXStyle.dynamic([[\"581568485\", [count < 1 ? 'none' : 'inline', show ? 'block' : 'none']]]) + \" \" + 'btn'\n  })), __jsx(\"p\", {\n    className: _JSXStyle.dynamic([[\"581568485\", [count < 1 ? 'none' : 'inline', show ? 'block' : 'none']]]) + \" \" + 'message'\n  }, message))), __jsx(_JSXStyle, {\n    id: \"581568485\",\n    dynamic: [count < 1 ? 'none' : 'inline', show ? 'block' : 'none']\n  }, [\"h1.__jsx-style-dynamic-selector{color:#db415d;text-transform:uppercase;}\", \".exit.__jsx-style-dynamic-selector{position:absolute;right:5px;top:5px;font-size:1.5rem;}\", \"input.__jsx-style-dynamic-selector{padding:.5em;border-radius:20px;border:0;margin:.8em .4em;}\", \".btn.__jsx-style-dynamic-selector{border-radius:5px;margin:0 auto;margin-top:3em;background:#db415d;color:white;text-transform:uppercase;font-weight:bold;width:100%;}\", \".message.__jsx-style-dynamic-selector{color:red;font-size:0.6rem;display:\".concat(count < 1 ? 'none' : 'inline', \";}\"), \".portal.__jsx-style-dynamic-selector{height:100vh;left:0;top:0;width:100vw;position:fixed;z-index:100000000;background:rgba(0,0,0,0.4);display:\".concat(show ? 'block' : 'none', \";}\"), \".login-container.__jsx-style-dynamic-selector{background:white;border-radius:20px;width:300px;margin:10% auto;padding:30px;position:relative;height:300px;}\"]));\n};\n\nexport default LoginPortal;","map":null,"metadata":{},"sourceType":"module"}