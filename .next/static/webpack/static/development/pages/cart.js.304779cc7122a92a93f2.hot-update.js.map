{"version":3,"file":"static/webpack/static/development/pages/cart.js.304779cc7122a92a93f2.hot-update.js","sources":["webpack:///./pages/cart.js"],"sourcesContent":["import React from 'react'\n\nimport 'isomorphic-fetch'\nimport gql from 'graphql-tag'\nimport { Query } from 'react-apollo'\nimport ProductosInCart from '../component/productViews/ProductosInCart'\nimport Layout from '../component/Layout'\nimport Error from '../component/views/Error'\nimport Spinner from '../component/views/Spinner'\nimport { Router } from '../routes'\nimport Boleta from '../component/views/Boleta'\n\nconst GET_USER = gql`\n  {\n    getUsers {\n      _id\n      username\n      quantities {\n        product {\n          title\n          image\n          _id\n          discount\n          price\n        }\n        quantity\n      }\n    }\n  }\n`\n\nlet pricesDiscount = 10\n\nclass Cart extends React.Component {\n  getDiscount(price, discount) {\n    const newPrice = ((100 - discount) * price) / 100\n    return newPrice\n  }\n  pricesTosum(array) {\n    return array.reduce((a, b) => a + b).toFixed(2)\n  }\n\n  render() {\n    return (\n      <Layout>\n        <div className='main'>\n          <h2>Carrito de compras </h2>\n\n          <Query query={GET_USER}>\n            {({ client, loading, error, data }) => {\n              if (loading) return <Spinner />\n              if (error) return Router.pushRoute('/')\n              console.log(data)\n\n              return (\n                <div className='container'>\n                  aea\n                  <div className='container-products'>\n                    <ProductosInCart\n                      data={data.getUsers.quantities}\n                      client={client}\n                      user={data.getUsers}\n                    />\n                  </div>\n                  <Boleta\n                    data={data.getUsers.quantities}\n                    pricesTosum={this.pricesTosum(\n                      data.getUsers.quantities.map(\n                        e => parseFloat(e.product.price) * e.quantity\n                      )\n                    )}\n                    pricesDiscount={this.pricesTosum(\n                      data.getUsers.quantities.map(e =>\n                        this.getDiscount(\n                          parseFloat(e.product.price) * e.quantity,\n                          e.product.discount\n                        )\n                      )\n                    )}\n                  ></Boleta>\n                </div>\n              )\n            }}\n          </Query>\n        </div>\n\n        <style jsx>\n          {`\n            .main {\n              margin-top: 10px;\n            }\n            .container {\n              margin: 0 auto;\n              max-width: 1200px;\n              display: flex;\n\n              flex-direction: column;\n            }\n            .container-products {\n              width: 100%;\n            }\n\n            .btn {\n              width: 100%;\n              box-sizing: border-box;\n              padding: 0.6rem;\n              text-align: center;\n              color: white;\n              background: #e84855;\n              position: relative;\n              z-index: 19;\n            }\n            .btn:hover {\n              cursor: pointer;\n            }\n            @media (min-width: 660px) {\n              .cart-boleta {\n                margin-left: 70px;\n              }\n              .container {\n                flex-direction: row;\n              }\n            }\n          `}\n        </style>\n      </Layout>\n    )\n  }\n}\nexport default Cart\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAmBA;AACA;AACA;;;;;;;;;;;;;AACA;AACA;AACA;AACA;;;AACA;AACA;AAAA;AAAA;AACA;;;AAEA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AAHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAOA;AACA;AAEA;AAAA;AAGA;AACA;AAAA;AARA;AAAA;AAAA;AAAA;AAAA;AAAA;AAkBA;AAtCA;AAAA;AAAA;AAmFA;;;;AA9FA;AACA;AA+FA;;;;A","sourceRoot":""}